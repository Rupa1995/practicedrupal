<?php

/**
 * @file
 * Defines a telephone number field type with telephone types selector.
 *
 * Extend core telephone module.
 */

use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_field_widget_FORM_ID_form_alter().
 */
function telephone_type_field_widget_form_alter(&$element, FormStateInterface $form_state, $context) {
  $field_definition = $context['items']->getFieldDefinition();
  if ($field_definition->getType() == 'telephone_type') {
    if (isset($element['value']['#title'])) {
      $element['value']['#title'] = 'Number';
    }

    // Add title for telephone field back for multiple values.
    $cardinality = $field_definition->getFieldStorageDefinition()->getCardinality();
    if ($cardinality == 1) {
      $element['#type'] = 'fieldset';
    }
    else {
      $element['value']['#title_display'] = 'before';
    }
  }
}

/**
 * Function to return telephone type options.
 *
 * @param string $option
 *   Function telephone_types_options option.
 *
 * @return array|mixed
 *   Function telephone_types_options array mixed.
 */
function telephone_types_options($option = NULL) {
  $options = [
    'main'  => t('Main number'),
    'home'  => t('Home'),
    'cell'  => t('Cellular/Mobile'),
    'work'  => t('Work'),
    'fax'   => t('Fax'),
    'pager' => t('Pager'),
  ];

  return isset($options[$option]) ? $options[$option] : $options;
}
